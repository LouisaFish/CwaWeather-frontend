<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ£®æ£®å¤©æ°£ 2.0</title>
    <link rel="icon" type="image/png" href="./icon-v2.png" />
    <link rel="apple-touch-icon" href="./icon-v2.png" />
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&display=swap" rel="stylesheet" />

    <style>
      /* =============================
         ğŸƒ å‹•æ£®ä¸»é¡Œï¼šè‰²ç¥¨èˆ‡è®Šæ•¸
         ============================= */
      :root {
        --ac-green: #8ee0b0;
        --ac-cream: #fffdf3;
        --ac-soil: #7b674c;
        --ac-blue: #5ec5e8;
        --ac-yellow: #f7f2a4;
        --ac-brown: #6d5845;
        --card-shadow: 0 8px 0 rgba(0, 0, 0, 0.15);
        --card-border: 4px dashed #fff6d8;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Zen Maru Gothic", sans-serif;

        /* =============================
           ğŸƒ å‹•æ£®åœ°åœ–é¢¨èƒŒæ™¯
           - æœ‰è‰åœ°å³¶å¶¼ï¼‹å°æˆ¿å­ï¼‹æ¨¹å¢ pattern
           ============================= */
        background-color: #9be7c4;
        background-image:
          url('bg-island.png'),
          url('bg-house.png'),
          url('bg-tree.png'),
          repeating-linear-gradient(45deg, rgba(255,255,255,0.18) 0px, rgba(255,255,255,0.18) 10px, transparent 10px, transparent 20px);
        background-size: 300px, 180px, 150px, auto;
        background-repeat: no-repeat, repeat, repeat, repeat;
        background-position: bottom right, top left, center right, center;

        min-height: 100vh;
        padding-bottom: 30px;
        color: var(--ac-brown);
      }

      /* =============================
         ğŸ“ é ‚éƒ¨ç‹€æ…‹åˆ—ï¼ˆå‹•æ£®æœ¨ç‰Œæ„Ÿï¼‰
         ============================= */
      .status-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        background: rgba(255, 255, 255, 0.5);
        backdrop-filter: blur(6px);
        border-bottom: 3px solid #e5d9b6;
      }

      .location-pill {
        background: var(--ac-yellow);
        padding: 5px 18px;
        border-radius: 18px;
        font-weight: 900;
        border: 3px solid #ffffff;
        transform: rotate(-2deg);
        color: var(--ac-brown);
        font-size: 1.1rem;
      }

      .update-pill {
        font-size: 0.9rem;
        padding: 4px 10px;
        border-radius: 12px;
        background: rgba(0, 0, 0, 0.25);
        color: white;
      }

      .container {
        padding: 20px;
        max-width: 600px;
        margin: 0 auto;
      }

      /* =============================
         â­ Hero ä¸»å¡ç‰‡ï¼ˆå‹•æ£®æ‰‹ä½œæœ¨æ¡†ï¼‰
         ============================= */
      .hero-card {
        background: var(--ac-cream);
        border-radius: 30px;
        padding: 35px 25px;
        text-align: center;
        border: var(--card-border);
        box-shadow: var(--card-shadow);
        margin-bottom: 30px;
        position: relative;
      }

      /* å°æ¨™ç±¤æ³¡æ³¡ */
      .hero-period {
        position: absolute;
        top: -18px;
        left: 50%;
        transform: translateX(-50%);
        background: var(--ac-blue);
        padding: 6px 20px;
        border-radius: 20px;
        color: white;
        font-weight: bold;
        border: 3px solid white;
        box-shadow: 0 4px 0 rgba(0, 0, 0, 0.15);
      }

      .hero-temp-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px;
        margin: 20px 0;
      }

      /* =============================
         â˜ï¸ ä¸» iconï¼ˆæ“¬äººåŒ–å‹•æ£®é¢¨ï¼‰
         ============================= */
      .hero-icon {
        width: 90px;
        height: 90px;
      }

      .hero-temp {
        font-size: 4.5rem;
        font-weight: 900;
        color: var(--ac-brown);
      }

      .hero-desc {
        font-size: 1.4rem;
        margin-bottom: 20px;
        font-weight: 700;
        color: #866c55;
      }

      /* =============================
         ğŸƒ å»ºè­°å¡ç‰‡ï¼ˆå·¦å³å°é½Šä¸¦æ”¾å¤§ï¼‰
         ============================= */
      .advice-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 18px;
        margin-top: 20px;
      }

      .advice-item {
        background: rgba(255, 255, 255, 0.7);
        padding: 15px 10px;
        border-radius: 22px;
        border: var(--card-border);
        text-align: center;
        box-shadow: var(--card-shadow);
      }

      .advice-icon {
        width: 50px;
        height: 50px;
      }

      .advice-text {
        font-size: 1.2rem;
        font-weight: 900;
        color: var(--ac-brown);
        margin-top: 10px;
      }

      /* =============================
         ğŸŒ¤ï¸ ç¨å¾Œé å ±ï¼ˆæ›´å¤§å¡ç‰‡ + å°é½Šï¼‰
         ============================= */
      .section-title {
        font-weight: 900;
        font-size: 1.3rem;
        color: #fff;
        margin: 0 0 12px 5px;
        text-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
      }

      .scroll-container {
        display: flex;
        overflow-x: auto;
        gap: 15px;
        padding-bottom: 10px;
      }

      .mini-card {
        min-width: 160px;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 25px;
        padding: 20px;
        text-align: center;
        border: var(--card-border);
        box-shadow: var(--card-shadow);
        flex-shrink: 0;
      }

      .mini-time {
        background: var(--ac-green);
        padding: 4px 12px;
        border-radius: 10px;
        color: white;
        margin-bottom: 10px;
        font-size: 0.9rem;
        font-weight: bold;
      }

      .mini-icon {
        width: 55px;
        height: 55px;
        margin: 10px 0;
      }

      .mini-temp {
        font-size: 1.3rem;
        font-weight: 800;
        color: var(--ac-brown);
      }

      /* =============================
         â³ Loadingï¼ˆå°é›²æœµé£„é£„ï¼‰
         ============================= */
      .loading-screen {
        position: fixed;
        inset: 0;
        background: var(--ac-green);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 999;
      }
    </style>
  </head>

  <body>
    <div id="loading" class="loading-screen">
      <img src="icon-cloud-happy.png" width="90" style="animation: float 2s infinite" />
      <p style="color:white; font-weight: bold; margin-top: 20px">åŠªåŠ›æ”¶é›†é›²æœµè³‡è¨Šä¸­...</p>
    </div>

    <div class="status-bar">
      <div class="location-pill">ğŸ“ æ–°åŒ—å¸‚</div>
      <div id="updateTime" class="update-pill">æ›´æ–°ä¸­...</div>
    </div>

    <div class="container" id="mainContent" style="display:none">
      <div id="heroCard"></div>

      <h3 class="section-title">ç¨å¾Œé å ±</h3>
      <div class="scroll-container" id="futureForecasts"></div>
    </div>

    <script>
      /* -----------------------------
         â˜ï¸ å‹•æ£®æ“¬äººåŒ– icon ç³»çµ±
         ----------------------------- */
      function getCuteIcon(weather) {
        if (!weather) return "icon-cloud-happy.png";
        if (weather.includes("æ™´")) return "icon-sun-happy.png";
        if (weather.includes("å¤šé›²")) return "icon-cloud-smile.png";
        if (weather.includes("é™°")) return "icon-cloud-gray.png";
        if (weather.includes("é›¨")) return "icon-rain-sad.png";
        return "icon-cloud-happy.png";
      }

      const API_URL = "https://weather-hex-project.zeabur.app/api/weather/newtaipei";

      async function loadWeather() {
        const res = await fetch(API_URL);
        const data = await res.json();

        const hero = data.current;

        document.getElementById("heroCard").innerHTML = `
          <div class="hero-card">
            <div class="hero-period">${hero.period}</div>
            <div class="hero-temp-container">
              <img class="hero-icon" src="${getCuteIcon(hero.wx)}" />
              <div class="hero-temp">${hero.temp}Â°</div>
            </div>
            <div class="hero-desc">${hero.wx}</div>

            <div class="advice-grid">
              <div class="advice-item">
                <img class="advice-icon" src="icon-clothes.png" />
                <div class="advice-text">${hero.clothes}</div>
              </div>
              <div class="advice-item">
                <img class="advice-icon" src="icon-umbrella.png" />
                <div class="advice-text">${hero.rain}</div>
              </div>
            </div>
          </div>`;

        document.getElementById("updateTime").innerText = data.updateTime;

        /* Future cards */
        document.getElementById("futureForecasts").innerHTML = data.forecast
          .map(
            (f) => `
          <div class="mini-card">
            <div class="mini-time">${f.time}</div>
            <img class="mini-icon" src="${getCuteIcon(f.wx)}" />
            <div class="mini-temp">${f.temp}Â°</div>
          </div>`
          )
          .join("");

        document.getElementById("loading").style.display = "none";
        document.getElementById("mainContent").style.display = "block";
      }

      loadWeather();
    </script>
  </body>
</html>
